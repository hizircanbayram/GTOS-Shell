#include    <stdio.h>
#include    <stdlib.h>
#include    <dirent.h>
#include	<sys/stat.h>
#include    "lsf.h"
//#include	<sys/types.h>


int main(int argc, char **argv) {
    DIR *curDir = opendir(".");
    directoryOpenControl(curDir);
    struct dirent *curFile = NULL;
    struct stat curFileStat;
	while ((curFile=readdir(curDir)) != NULL) { // takes every file in the directory
        if (!strcmp(".", curFile->d_name) || !strcmp("..", curFile->d_name))
            continue;
		if (curFile->d_type != DT_DIR) { // If the file is not a directory
            int statRetVal = stat(curFile->d_name, &curFileStat);
            statOpenControl(statRetVal, curFile->d_name);
            writeInfos(curFileStat);
            printf("%s\n", curFile->d_name);
        }
    }
}



void directoryOpenControl(const DIR* curDirPtr) {
    if (!curDirPtr) {
        fprintf(stderr, "The current directory couldn't be opened for some reason.\n");
        exit(EXIT_FAILURE);
    }
}


void statOpenControl(int statRetVal, const char *name) {
    if (statRetVal < 0) {
        fprintf(stderr, "Stat of %s couldn't be opened for some reason.\n", name);
        exit(EXIT_FAILURE);
    }
}


void writeInfos(const struct stat) {

}
